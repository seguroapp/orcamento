<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Or√ßamento Visual CFTV - TypeScript</title>
    
    <!-- Tailwind CSS para design responsivo -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="p-4 md:p-8">

    <!-- Cabe√ßalho da Aplica√ß√£o -->
    <header class="header text-center mb-8">
        <h1 class="text-3xl font-extrabold text-indigo-700">Gerador de Or√ßamento Visual CFTV</h1>
        <p class="text-gray-600 mt-1">Vers√£o TypeScript - Profissional e Moderna</p>
    </header>

    <!-- Container Principal -->
    <div class="container mx-auto">

        <!-- Controles Superiores -->
        <div class="controls-panel bg-white p-6 rounded-lg shadow-md mb-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                
                <!-- Sele√ß√£o de Modo -->
                <div class="mode-selector">
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Modo de Edi√ß√£o</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button id="selectMode" class="tool-btn p-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition text-sm">
                            Selecionar
                        </button>
                        <button id="cameraMode" class="tool-btn p-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition text-sm">
                            C√¢mera
                        </button>
                        <button id="wallMode" class="tool-btn p-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition text-sm">
                            Parede
                        </button>
                        <button id="deleteMode" class="tool-btn p-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition text-sm">
                            Excluir
                        </button>
                    </div>
                </div>

                <!-- Tipo de C√¢mera -->
                <div class="camera-type-selector">
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Tipo de C√¢mera</label>
                    <select id="cameraType" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                        <option value="dome">DOME (Interna)</option>
                        <option value="bullet">BULLET (Externa)</option>
                        <option value="ptz">PTZ (Girat√≥ria)</option>
                        <option value="fisheye">FISHEYE (360¬∞)</option>
                    </select>
                </div>

                <!-- Seletor de Andares -->
                <div class="floor-selector">
                    <label class="block text-sm font-semibold text-gray-700 mb-2">üè¢ Andar Atual</label>
                    <div class="flex items-center space-x-2">
                        <select id="currentFloor" class="flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="1">1¬∫ Andar - T√©rreo</option>
                            <option value="2">2¬∫ Andar</option>
                            <option value="3">3¬∫ Andar</option>
                            <option value="4">4¬∫ Andar</option>
                            <option value="5">5¬∫ Andar</option>
                        </select>
                        <button id="addFloor" class="p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition text-sm" title="Adicionar Andar">
                            +
                        </button>
                    </div>
                    <div class="mt-2 text-xs text-gray-600">
                        <span id="floorInfo">C√¢meras neste andar: <span id="floorCameraCount">0</span></span>
                    </div>
                </div>

                <!-- Navega√ß√£o de Andares -->
                <div class="floor-navigation">
                    <label class="block text-sm font-semibold text-gray-700 mb-2">üîÑ Navega√ß√£o R√°pida</label>
                    <div class="grid grid-cols-3 gap-1" id="floorButtons">
                        <button class="floor-btn active p-2 bg-indigo-500 text-white rounded text-xs hover:bg-indigo-600 transition" data-floor="1">
                            1¬∫
                        </button>
                        <button class="floor-btn p-2 bg-gray-200 text-gray-700 rounded text-xs hover:bg-gray-300 transition" data-floor="2">
                            2¬∫
                        </button>
                        <button class="floor-btn p-2 bg-gray-200 text-gray-700 rounded text-xs hover:bg-gray-300 transition" data-floor="3">
                            3¬∫
                        </button>
                    </div>
                </div>

                <!-- A√ß√µes R√°pidas -->
                <div class="quick-actions">
                    <label class="block text-sm font-semibold text-gray-700 mb-2">A√ß√µes</label>
                    <div class="flex space-x-2">
                        <button id="clearCanvas" class="flex-1 p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition">
                            Limpar
                        </button>
                        <button id="exportCanvas" class="flex-1 p-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition">
                            Exportar
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Layout Principal - Canvas, Configura√ß√µes e Or√ßamento -->
        <div class="space-y-6">
            
            <!-- Layout Horizontal: Canvas e Configura√ß√µes -->
            <div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
                
                <!-- √Årea do Canvas -->
                <div class="xl:col-span-2 canvas-section bg-white rounded-lg shadow-md p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold text-gray-800">Mapa do Projeto</h2>
                        <div class="text-sm text-gray-600">
                            <span id="currentFloorDisplay">Andar: 1¬∫</span> | 
                            <span id="totalFloorsDisplay">Total: 3 andares</span>
                        </div>
                    </div>
                    
                    <!-- Canvas Container -->
                    <div class="canvas-container relative border-2 border-gray-200 rounded-lg overflow-hidden">
                        <canvas id="mapCanvas" width="800" height="450" 
                                class="block w-full h-auto cursor-crosshair">
                            Seu navegador n√£o suporta canvas HTML5.
                        </canvas>
                        
                        <!-- Canvas Overlay para informa√ß√µes -->
                        <div id="canvasInfo" class="absolute top-2 left-2 bg-black bg-opacity-50 text-white text-xs p-2 rounded hidden">
                            <div id="mouseCoords">X: 0, Y: 0</div>
                            <div id="cameraCount">C√¢meras: 0</div>
                        </div>
                    </div>

                    <!-- Instru√ß√µes -->
                    <div id="modeInstructions" class="mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                        <p class="text-sm text-blue-800">
                            Clique para selecionar e mover c√¢meras.
                        </p>
                    </div>

                    <!-- Instru√ß√µes de Controle de √Çngulos -->
                    <div class="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
                        <h4 class="text-sm font-semibold text-yellow-800 mb-2">‚å®Ô∏è Controles de Rota√ß√£o</h4>
                        <div class="text-xs text-yellow-700 space-y-1">
                            <div><strong>Setas ‚Üê ‚Üí</strong> ou <strong>A D</strong>: Rotacionar ¬±15¬∞</div>
                            <div><strong>‚Üë W</strong>: Norte ‚Ä¢ <strong>‚Üì S</strong>: Sul ‚Ä¢ <strong>Espa√ßo</strong>: Leste</div>
                            <div><strong>Q</strong>: Noroeste ‚Ä¢ <strong>E</strong>: Nordeste ‚Ä¢ <strong>Z</strong>: Sudoeste ‚Ä¢ <strong>C</strong>: Sudeste</div>
                            <div class="text-yellow-600 mt-2">üí° Selecione uma c√¢mera primeiro, depois use as teclas</div>
                        </div>
                    </div>
                </div>

                <!-- √Årea de Configura√ß√µes da C√¢mera -->
                <div class="xl:col-span-1">
                    <!-- Controles da C√¢mera Selecionada -->
                    <div id="cameraControls" class="bg-white rounded-lg shadow-md p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-3">üìπ Controles da C√¢mera</h3>
                        
                        <!-- Informa√ß√µes da C√¢mera -->
                        <div id="cameraInfo" class="mb-4 p-3 bg-gray-50 border border-gray-200 rounded-lg">
                            <p class="text-sm text-gray-600">Selecione uma c√¢mera no mapa para editar suas configura√ß√µes</p>
                        </div>
                        
                        <div class="space-y-4">
                            <!-- Tipo de C√¢mera -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tipo de C√¢mera</label>
                                <select id="cameraTypeSelect" class="w-full p-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                                    <option value="dome">Dome</option>
                                    <option value="bullet">Bullet</option>
                                    <option value="ptz">PTZ</option>
                                    <option value="fisheye">Fisheye</option>
                                </select>
                            </div>

                            <!-- Posi√ß√£o -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Posi√ß√£o</label>
                                <div class="grid grid-cols-2 gap-2">
                                    <div>
                                        <label class="text-xs text-gray-600">X:</label>
                                        <input type="number" id="cameraX" min="0" max="800" 
                                               class="w-full p-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                                    </div>
                                    <div>
                                        <label class="text-xs text-gray-600">Y:</label>
                                        <input type="number" id="cameraY" min="0" max="450" 
                                               class="w-full p-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                                    </div>
                                </div>
                            </div>

                            <!-- √Çngulo de Vis√£o -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    √Çngulo de Vis√£o: <span id="angleValue">90¬∞</span>
                                </label>
                                <input type="range" id="cameraAngle" min="30" max="180" value="90" step="15"
                                       class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                            </div>

                            <!-- Alcance -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Alcance: <span id="rangeValue">50px</span>
                                </label>
                                <input type="range" id="cameraRange" min="20" max="100" value="50" step="5"
                                       class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                            </div>

                            <!-- Rota√ß√£o -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Rota√ß√£o: <span id="rotationValue">0¬∞</span>
                                </label>
                                <input type="range" id="cameraRotation" min="0" max="360" value="0" step="15"
                                       class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider">
                            </div>
                        </div>

                        <!-- Presets de Dire√ß√£o -->
                        <div class="mt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">üß≠ Dire√ß√µes R√°pidas</label>
                            <div class="grid grid-cols-2 gap-2">
                                <button onclick="cftvApp.applyCameraDirectionPreset('norte')" 
                                        class="px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded hover:bg-blue-200 transition-colors">
                                    Norte
                                </button>
                                <button onclick="cftvApp.applyCameraDirectionPreset('sul')" 
                                        class="px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded hover:bg-blue-200 transition-colors">
                                    Sul
                                </button>
                                <button onclick="cftvApp.applyCameraDirectionPreset('leste')" 
                                        class="px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded hover:bg-blue-200 transition-colors">
                                    Leste
                                </button>
                                <button onclick="cftvApp.applyCameraDirectionPreset('oeste')" 
                                        class="px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded hover:bg-blue-200 transition-colors">
                                    Oeste
                                </button>
                            </div>
                        </div>

                        <!-- Presets de Configura√ß√£o -->
                        <div class="mt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">üìê Configura√ß√µes R√°pidas</label>
                            <div class="grid grid-cols-2 gap-2">
                                <button onclick="cftvApp.applyCameraPreset('close')" 
                                        class="px-2 py-1 text-xs bg-green-100 text-green-800 rounded hover:bg-green-200 transition-colors">
                                    Pr√≥ximo
                                </button>
                                <button onclick="cftvApp.applyCameraPreset('medium')" 
                                        class="px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded hover:bg-yellow-200 transition-colors">
                                    M√©dio
                                </button>
                                <button onclick="cftvApp.applyCameraPreset('wide')" 
                                        class="px-2 py-1 text-xs bg-orange-100 text-orange-800 rounded hover:bg-orange-200 transition-colors">
                                    Amplo
                                </button>
                                <button onclick="cftvApp.applyCameraPreset('corridor')" 
                                        class="px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded hover:bg-purple-200 transition-colors">
                                    Corredor
                                </button>
                                <button onclick="cftvApp.applyCameraPreset('entrance')" 
                                        class="px-2 py-1 text-xs bg-indigo-100 text-indigo-800 rounded hover:bg-indigo-200 transition-colors">
                                    Entrada
                                </button>
                                <button onclick="cftvApp.applyCameraPreset('parking')" 
                                        class="px-2 py-1 text-xs bg-red-100 text-red-800 rounded hover:bg-red-200 transition-colors">
                                    Estacionamento
                                </button>
                            </div>
                        </div>

                        <!-- Bot√µes de A√ß√£o -->
                        <div class="flex flex-col space-y-2 mt-4">
                            <button id="updateCamera" class="w-full p-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition text-sm">
                                Aplicar Mudan√ßas
                            </button>
                            <button id="deleteCamera" class="w-full p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition text-sm">
                                Remover C√¢mera
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- √Årea do Or√ßamento (Largura Completa) -->
            <div class="budget-section bg-white rounded-lg shadow-md p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold text-gray-800">Lista de Or√ßamento</h2>
                    <button id="addBudgetItem" class="p-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition">
                        + Adicionar Item
                    </button>
                </div>

                <!-- Lista de Itens -->
                <div id="budgetList" class="space-y-3 mb-4 max-h-64 overflow-y-auto">
                    <!-- Itens ser√£o inseridos dinamicamente aqui -->
                </div>

                <!-- Total -->
                <div class="border-t pt-4">
                    <div class="flex justify-between items-center text-lg font-bold">
                        <span>Total do Investimento:</span>
                        <span id="totalBudget" class="text-indigo-600">R$ 0,00</span>
                    </div>
                </div>

                <!-- Bot√µes de A√ß√£o do Or√ßamento -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                    <button id="generateProposal" class="p-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-semibold">
                        Gerar Proposta Comercial
                    </button>
                    <button id="configureProposal" class="p-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition">
                        Configurar Dados da Proposta
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Adicionar/Editar Item do Or√ßamento -->
    <div id="budgetModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 w-full max-w-md mx-4">
            <h3 id="modalTitle" class="text-lg font-bold text-gray-800 mb-4">Adicionar Item ao Or√ßamento</h3>
            
            <form id="budgetForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-1">Descri√ß√£o</label>
                    <input type="text" id="itemDescription" 
                           class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" 
                           placeholder="Ex: C√¢mera IP Dome" required>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-1">Quantidade</label>
                        <input type="number" id="itemQuantity" min="1" value="1"
                               class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-1">Pre√ßo Unit√°rio (R$)</label>
                        <input type="number" id="itemPrice" min="0" step="0.01" value="0.00"
                               class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" required>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-1">Categoria</label>
                    <select id="itemCategory" 
                            class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" required>
                        <option value="camera">C√¢meras</option>
                        <option value="cable">Cabos e Conectores</option>
                        <option value="equipment">Equipamentos</option>
                        <option value="installation">Instala√ß√£o</option>
                        <option value="other">Outros</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-1">Especifica√ß√µes (Opcional)</label>
                    <textarea id="itemSpecs" rows="3"
                              class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" 
                              placeholder="Detalhes t√©cnicos ou observa√ß√µes..."></textarea>
                </div>

                <!-- Bot√µes do Modal -->
                <div class="flex space-x-3 pt-4">
                    <button type="button" id="cancelModal" 
                            class="flex-1 bg-gray-300 text-gray-700 p-2 rounded-lg hover:bg-gray-400 transition">
                        Cancelar
                    </button>
                    <button type="submit" id="saveBudgetItem"
                            class="flex-1 bg-indigo-500 text-white p-2 rounded-lg hover:bg-indigo-600 transition">
                        Salvar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Configurar Dados da Proposta -->
    <div id="proposalConfigModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-screen overflow-y-auto">
            <h3 class="text-lg font-bold text-gray-800 mb-4">Configurar Dados da Proposta</h3>
            
            <form id="proposalConfigForm" class="space-y-6">
                <!-- Dados da Empresa -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-semibold text-gray-700 mb-3">Dados da Empresa:</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Nome da Empresa</label>
                            <input type="text" id="configCompanyName" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="Sua Empresa de Seguran√ßa Eletr√¥nica">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Telefone</label>
                            <input type="text" id="configCompanyPhone" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="(11) 99999-9999">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">E-mail</label>
                            <input type="email" id="configCompanyEmail" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="contato@empresa.com.br">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">CNPJ</label>
                            <input type="text" id="configCompanyCNPJ" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="00.000.000/0001-00">
                        </div>
                    </div>
                </div>

                <!-- Dados do Cliente -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-semibold text-gray-700 mb-3">Dados do Cliente:</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Nome/Empresa</label>
                            <input type="text" id="configClientName" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="Nome ou Raz√£o Social">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">CPF/CNPJ</label>
                            <input type="text" id="configClientDocument" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="000.000.000-00">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Telefone</label>
                            <input type="text" id="configClientPhone" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="(11) 99999-9999">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">E-mail</label>
                            <input type="email" id="configClientEmail" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="cliente@email.com">
                        </div>
                    </div>
                    <div class="mt-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Endere√ßo Completo</label>
                        <textarea id="configClientAddress" rows="2"
                                  class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                  placeholder="Rua, n¬∫, bairro, cidade, CEP"></textarea>
                    </div>
                </div>

                <!-- Configura√ß√µes da Proposta -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-semibold text-gray-700 mb-3">Configura√ß√µes da Proposta:</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Validade (dias)</label>
                            <input type="number" id="configProposalValidity" min="1" max="90" value="15"
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Prazo de Entrega</label>
                            <input type="text" id="configDeliveryTime" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="5 a 10 dias √∫teis" value="5 a 10 dias √∫teis">
                        </div>
                    </div>
                </div>

                <!-- Bot√µes do Modal -->
                <div class="flex space-x-3 pt-4">
                    <button type="button" id="cancelProposalConfig" 
                            class="flex-1 bg-gray-300 text-gray-700 p-2 rounded-lg hover:bg-gray-400 transition">
                        Cancelar
                    </button>
                    <button type="submit" id="saveProposalConfig"
                            class="flex-1 bg-indigo-500 text-white p-2 rounded-lg hover:bg-indigo-600 transition">
                        Salvar Configura√ß√µes
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Configurar Dados da Proposta -->
    <div id="proposalConfigModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-screen overflow-y-auto">
            <h3 class="text-lg font-bold text-gray-800 mb-4">‚öôÔ∏è Configurar Dados da Proposta</h3>
            
            <form id="proposalConfigForm" class="space-y-6">
                <!-- Dados da Empresa -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-semibold text-gray-700 mb-3">üìç Dados da Empresa:</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Nome da Empresa</label>
                            <input type="text" id="configCompanyName" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="Sua Empresa de Seguran√ßa Eletr√¥nica" value="Sua Empresa de Seguran√ßa Eletr√¥nica">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">CNPJ</label>
                            <input type="text" id="configCompanyCNPJ" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="XX.XXX.XXX/XXXX-XX" value="XX.XXX.XXX/XXXX-XX">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Telefone</label>
                            <input type="tel" id="configCompanyPhone" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="(11) 99999-9999" value="(11) 99999-9999">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">E-mail</label>
                            <input type="email" id="configCompanyEmail" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="contato@empresa.com.br" value="contato@empresa.com.br">
                        </div>
                    </div>
                </div>

                <!-- Dados do Cliente -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-semibold text-gray-700 mb-3">üë§ Dados do Cliente:</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Nome do Cliente</label>
                            <input type="text" id="configClientName" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="Nome do Cliente" value="Nome do Cliente">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Telefone do Cliente</label>
                            <input type="tel" id="configClientPhone" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="(11) 99999-9999">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">E-mail do Cliente</label>
                            <input type="email" id="configClientEmail" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="cliente@email.com">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">CPF/CNPJ do Cliente</label>
                            <input type="text" id="configClientDocument" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="XXX.XXX.XXX-XX">
                        </div>
                    </div>
                    <div class="mt-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Endere√ßo do Cliente</label>
                        <textarea id="configClientAddress" rows="2"
                                  class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                  placeholder="Rua, n¬∫, bairro, cidade, CEP"></textarea>
                    </div>
                </div>

                <!-- Configura√ß√µes da Proposta -->
                <div class="border rounded-lg p-4">
                    <h4 class="font-semibold text-gray-700 mb-3">üìã Configura√ß√µes da Proposta:</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Validade (dias)</label>
                            <input type="number" id="configProposalValidity" min="1" max="90" value="15"
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Prazo de Entrega</label>
                            <input type="text" id="configDeliveryTime" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="5 a 10 dias √∫teis" value="5 a 10 dias √∫teis">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Forma de Pagamento</label>
                            <input type="text" id="configPaymentMethod" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="√Ä vista com desconto ou parcelado" value="√Ä vista com desconto ou parcelado">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Garantia Equipamentos</label>
                            <input type="text" id="configWarrantyEquipment" 
                                   class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" 
                                   placeholder="12 meses" value="12 meses">
                        </div>
                    </div>
                </div>

                <!-- Bot√µes do Modal -->
                <div class="flex space-x-3 pt-4">
                    <button type="button" id="cancelProposalConfig" 
                            class="flex-1 bg-gray-300 text-gray-700 p-2 rounded-lg hover:bg-gray-400 transition">
                        Cancelar
                    </button>
                    <button type="submit" id="saveProposalConfig"
                            class="flex-1 bg-indigo-500 text-white p-2 rounded-lg hover:bg-indigo-600 transition">
                        Salvar Configura√ß√µes
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Se√ß√£o de Proposta Comercial (Vis√≠vel apenas na impress√£o) -->
    <div id="proposalSection" class="proposal-print-only" style="display: none;">
        <!-- Cabe√ßalho da Proposta -->
        <div class="proposal-header text-center mb-6">
            <h1 class="text-2xl font-bold text-indigo-800 mb-2">PROPOSTA COMERCIAL</h1>
            <h2 class="text-lg font-semibold text-gray-700">Sistema de CFTV - Circuito Fechado de TV</h2>
        </div>

        <!-- Informa√ß√µes da Empresa -->
        <div class="company-info bg-gray-50 p-4 rounded-lg mb-6">
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <h3 class="font-semibold text-gray-800 mb-2">Dados da Empresa:</h3>
                    <p><strong>Empresa:</strong> <span id="proposalCompanyName">Sua Empresa de Seguran√ßa Eletr√¥nica</span></p>
                    <p><strong>Telefone:</strong> <span id="proposalCompanyPhone">(11) 99999-9999</span></p>
                    <p><strong>E-mail:</strong> <span id="proposalCompanyEmail">contato@empresa.com.br</span></p>
                    <p><strong>CNPJ:</strong> <span id="proposalCompanyCNPJ">XX.XXX.XXX/XXXX-XX</span></p>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-800 mb-2">Dados da Proposta:</h3>
                    <p><strong>Data:</strong> <span id="proposalDate"></span></p>
                    <p><strong>Proposta N¬∫:</strong> <span id="proposalNumber"></span></p>
                    <p><strong>Validade:</strong> <span id="proposalValidity">15 dias</span></p>
                    <p><strong>Cliente:</strong> <span id="proposalClientName">Nome do Cliente</span></p>
                </div>
            </div>
        </div>
        </div>

        <!-- Dados do Cliente -->
        <div class="client-info bg-indigo-50 p-4 rounded-lg mb-6">
            <h3 class="font-semibold text-indigo-800 mb-3">Dados do Cliente:</h3>
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <p><strong>Nome/Empresa:</strong> <span id="clientName">_________________________</span></p>
                    <p><strong>CNPJ/CPF:</strong> <span id="clientDocument">_________________________</span></p>
                </div>
                <div>
                    <p><strong>Telefone:</strong> <span id="clientPhone">_________________________</span></p>
                    <p><strong>E-mail:</strong> <span id="clientEmail">_________________________</span></p>
                </div>
            </div>
            <p class="mt-2"><strong>Endere√ßo:</strong> <span id="clientAddress">_________________________________________________________</span></p>
        </div>

        <!-- Especifica√ß√µes T√©cnicas (Primeira P√°gina) -->
        <div class="specs-section-first-page mb-6">
            <h3 class="font-semibold text-gray-800 mb-3">Especifica√ß√µes T√©cnicas:</h3>
            <div class="bg-gray-50 p-4 rounded-lg">
                <ul class="list-disc ml-6 space-y-1 text-sm">
                    <li>C√¢meras IP com resolu√ß√£o Full HD (1080p)</li>
                    <li>Gravador NVR com armazenamento em HD</li>
                    <li>Visualiza√ß√£o remota via aplicativo m√≥vel</li>
                    <li>Grava√ß√£o cont√≠nua e por detec√ß√£o de movimento</li>
                    <li>Backup autom√°tico e manual dos v√≠deos</li>
                    <li>Sistema de alarme integrado</li>
                    <li>Garantia de 12 meses para equipamentos</li>
                    <li>Suporte t√©cnico especializado</li>
                </ul>
            </div>
        </div>

        <!-- Condi√ß√µes Comerciais (Primeira P√°gina) -->
        <div class="terms-section-first-page mb-6">
            <h3 class="font-semibold text-gray-800 mb-3">Condi√ß√µes Comerciais:</h3>
            <div class="text-sm space-y-2">
                <p><strong>Forma de Pagamento:</strong> √Ä vista com desconto ou parcelado conforme negocia√ß√£o</p>
                <p><strong>Prazo de Entrega:</strong> 5 a 10 dias √∫teis ap√≥s confirma√ß√£o do pedido</p>
                <p><strong>Instala√ß√£o:</strong> Inclu√≠da no valor, realizada por t√©cnicos especializados</p>
                <p><strong>Garantia:</strong> 12 meses para equipamentos e 6 meses para servi√ßos</p>
                <p><strong>Validade da Proposta:</strong> 15 dias corridos</p>
            </div>
        </div>

        <!-- Observa√ß√µes Importantes (Primeira P√°gina) -->
        <div class="observations-section-first-page mb-6">
            <h3 class="font-semibold text-gray-800 mb-3">Observa√ß√µes Importantes:</h3>
            <div class="text-sm bg-yellow-50 p-4 rounded-lg">
                <ul class="list-disc ml-6 space-y-1">
                    <li>Os pre√ßos est√£o sujeitos a altera√ß√£o sem aviso pr√©vio</li>
                    <li>Frete n√£o incluso (ser√° calculado conforme localiza√ß√£o)</li>
                    <li>Instala√ß√£o em locais de dif√≠cil acesso pode ter custo adicional</li>
                    <li>Infraestrutura el√©trica e de rede por conta do cliente</li>
                    <li>Projeto sujeito a visita t√©cnica para confirma√ß√£o</li>
                </ul>
            </div>
        </div>

        <!-- Total do Investimento (Final da Primeira P√°gina) -->
        <div class="total-section-first-page-bottom mb-6">
            <div class="total-investimento text-center">
                <h3 class="text-sm font-bold text-indigo-800 mb-1">VALOR TOTAL DO INVESTIMENTO</h3>
                <div class="text-xl font-bold text-indigo-900" id="proposalTotalValueFirstPage">R$ 0,00</div>
            </div>
        </div>

        <!-- Layout do Projeto -->
        <div class="project-visual mb-6">
            <h3 class="font-semibold text-gray-800 mb-3">Layout do Projeto - Todos os Andares:</h3>
            <div class="canvas-print-container border-2 border-gray-300 rounded-lg p-4 bg-white">
                <canvas id="printCanvas" width="800" height="450" class="w-full border rounded max-h-none" style="height: auto; max-height: none;"></canvas>
                <p class="text-sm text-gray-600 mt-2 text-center">
                    Disposi√ß√£o das c√¢meras em todos os andares do projeto
                </p>
            </div>
        </div>

        <!-- Lista de Itens do Or√ßamento -->
        <div class="budget-section mb-6">
            <h3 class="font-semibold text-gray-800 mb-3">Discrimina√ß√£o dos Itens:</h3>
            <table class="w-full border-collapse border border-gray-300">
                <thead>
                    <tr class="bg-gray-100">
                        <th class="border border-gray-300 p-2 text-left">Item</th>
                        <th class="border border-gray-300 p-2 text-left">Descri√ß√£o</th>
                        <th class="border border-gray-300 p-2 text-center">Qtd</th>
                        <th class="border border-gray-300 p-2 text-right">Valor Unit.</th>
                        <th class="border border-gray-300 p-2 text-right">Valor Total</th>
                    </tr>
                </thead>
                <tbody id="proposalBudgetTable">
                    <!-- Itens ser√£o inseridos aqui -->
                </tbody>
            </table>
        </div>

        <!-- Rodap√© da Proposta -->
        <div class="proposal-footer text-center border-t-2 border-indigo-200 pt-4">
            <p class="text-sm text-gray-600">
                Agradecemos a oportunidade de apresentar esta proposta.<br>
                Estamos √† disposi√ß√£o para esclarecimentos adicionais.
            </p>
            <div class="mt-4 text-xs text-gray-500">
                Documento gerado automaticamente pelo Sistema CFTV Visual Budget
            </div>
        </div>
    </div>

    <!-- Scripts da Aplica√ß√£o - TypeScript via Vite -->
    <script type="module" src="/src/main.ts"></script>

</body>
</html>