/**
 * CFTV Orçamento Visual - Estilos Principais
 * Arquivo de estilos CSS para o sistema de geração de orçamentos CFTV
 * Autor: Sistema CFTV
 * Data: 2025
 */

/* ========================================
   IMPORTAÇÕES E FONTES
======================================== */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

/* ========================================
   ESTILOS GERAIS
======================================== */
body {
    font-family: 'Inter', sans-serif;
    background-color: #f3f4f6;
}

.proposta-container {
    max-width: 800px;
    margin: 2rem auto;
    padding: 2rem;
    background-color: white;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

/* ========================================
   ESTILOS DO CANVAS/MAPA
======================================== */
#mapCanvas {
    border: 2px solid #e5e7eb;
    background-color: #ffffff;
    cursor: crosshair;
    transition: box-shadow 0.3s;
}

#mapCanvas:hover {
    box-shadow: 0 0 10px rgba(79, 70, 229, 0.5); /* Sombra roxa ao passar o mouse */
}

.camera-selected {
    box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.7); /* Borda roxa para câmera selecionada */
}

.mode-button-active {
    box-shadow: 0 0 0 2px #4F46E5 inset;
}

/* ========================================
   ESTILOS DE IMPRESSÃO (A4 OTIMIZADO)
======================================== */
@media print {
    /* Reset geral para impressão */
    * {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
        box-sizing: border-box !important;
    }
    
    @page {
        size: A4;
        margin: 12mm 8mm 12mm 12mm;
        padding: 0 !important;
    }
    
    html, body { 
        background: white !important; 
        margin: 0 !important;
        padding: 0 !important;
        color: #000 !important;
        font-family: 'Arial', sans-serif !important;
        font-size: 9pt !important;
        line-height: 1.2 !important;
        height: auto !important;
        overflow: visible !important;
    }
    
    /* Ocultar TODOS os elementos de interface na impressão */
    .header, .controls-panel, .canvas-section, .budget-section, 
    .tool-btn, .mode-selector, .camera-type-selector, .quick-actions,
    #budgetModal, #proposalConfigModal, .container > .grid, .container > .space-y-6, 
    button, input, select, textarea, .canvas-container, #canvasInfo, #modeInstructions,
    .container, nav, aside, .sidebar { 
        display: none !important; 
    }
    
    /* Mostrar apenas a seção de proposta na impressão */
    .proposal-print-only {
        display: block !important;
        max-width: none !important;
        width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
        box-shadow: none !important;
        background: white !important;
        page-break-before: auto !important;
        page-break-after: auto !important;
    }
    
    /* ========================================
       PREVENÇÃO DE FOLHAS EM BRANCO
    ======================================== */
    .proposal-print-only > * {
        page-break-inside: avoid-page !important;
        break-inside: avoid !important;
        orphans: 3 !important;
        widows: 3 !important;
    }
    
    /* ========================================
       CABEÇALHO DA PROPOSTA (COMPACTO)
    ======================================== */
    .proposal-header {
        border-bottom: 2px solid #1e40af !important;
        padding-bottom: 8pt !important;
        margin-bottom: 12pt !important;
        text-align: center !important;
        page-break-inside: avoid !important;
        page-break-after: avoid !important;
    }
    
    .proposal-header h1 {
        color: #1e40af !important;
        font-size: 16pt !important;
        font-weight: bold !important;
        margin: 0 0 4pt 0 !important;
        letter-spacing: 0.5pt !important;
    }
    
    .proposal-header h2 {
        color: #374151 !important;
        font-size: 11pt !important;
        font-weight: normal !important;
        margin: 0 !important;
    }
    
    /* ========================================
       INFORMAÇÕES DA EMPRESA (COMPACTA)
    ======================================== */
    .company-info {
        background: #f8fafc !important;
        border: 1px solid #e2e8f0 !important;
        border-radius: 3pt !important;
        padding: 8pt !important;
        margin-bottom: 10pt !important;
        page-break-inside: avoid !important;
        page-break-after: avoid !important;
    }
    
    .company-info h3 {
        color: #1e40af !important;
        font-size: 10pt !important;
        font-weight: bold !important;
        margin: 0 0 4pt 0 !important;
        border-bottom: 1px solid #cbd5e1 !important;
        padding-bottom: 2pt !important;
    }
    
    .company-info p {
        margin: 1pt 0 !important;
        font-size: 8pt !important;
        line-height: 1.3 !important;
    }
    
    /* ========================================
       LAYOUT DO PROJETO (PÁGINA 2)
    ======================================== */
    .project-visual {
        page-break-before: always !important;
        page-break-inside: avoid !important;
        page-break-after: auto !important;
        margin: 0 0 20pt 0 !important;
        padding: 0 !important;
    }
    
    .project-visual h3 {
        color: #1e40af !important;
        font-size: 16pt !important;
        font-weight: bold !important;
        margin: 0 0 12pt 0 !important;
        border-bottom: 3px solid #3b82f6 !important;
        padding-bottom: 6pt !important;
        text-align: center !important;
        text-transform: uppercase !important;
        letter-spacing: 1pt !important;
    }
    
    .canvas-print-container {
        border: 3px solid #1e40af !important;
        border-radius: 8pt !important;
        padding: 15pt !important;
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%) !important;
        text-align: center !important;
        margin: 0 0 15pt 0 !important;
        box-shadow: 0 4pt 16pt rgba(30, 64, 175, 0.2) !important;
        page-break-inside: avoid !important;
    }
    
    #printCanvas {
        max-width: 95% !important;
        height: 350px !important;
        border: 2px solid #1e40af !important;
        border-radius: 6pt !important;
        background: white !important;
        box-shadow: 0 2pt 8pt rgba(0,0,0,0.15) !important;
    }
    
    .canvas-print-container p {
        font-size: 10pt !important;
        color: #1e40af !important;
        margin: 10pt 0 0 0 !important;
        font-weight: bold !important;
        text-transform: uppercase !important;
        letter-spacing: 0.5pt !important;
        font-style: italic !important;
    }
    
    /* ========================================
       DISTRIBUIÇÃO POR ANDARES (REMOVIDA)
    ======================================== */
    .floors-section {
        display: none !important; /* Seção removida da proposta */
    }
    
    .floors-section h3, 
    .floors-section .bg-gray-50,
    .floor-info,
    .floor-info h4,
    .floor-details {
        display: none !important; /* Oculta todos os elementos relacionados */
    }
    
    /* ========================================
       TABELA DE ORÇAMENTO (PÁGINA 3)
    ======================================== */
    .budget-section {
        page-break-before: auto !important;
        page-break-inside: auto !important;
        page-break-after: auto !important;
        margin: 15pt 0 15pt 0 !important;
        padding: 12pt !important;
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%) !important;
        border: 2px solid #3b82f6 !important;
        border-radius: 6pt !important;
        box-shadow: 0 2pt 8pt rgba(0,0,0,0.1) !important;
    }
    
    .budget-section h3 {
        color: #1e40af !important;
        font-size: 14pt !important;
        font-weight: bold !important;
        margin: 0 0 12pt 0 !important;
        border-bottom: 2px solid #3b82f6 !important;
        padding-bottom: 4pt !important;
        text-align: center !important;
        text-transform: uppercase !important;
        letter-spacing: 1pt !important;
    }
    
    table {
        width: 100% !important;
        border-collapse: collapse !important;
        font-size: 8pt !important;
        margin-bottom: 8pt !important;
        break-inside: auto !important;
        background: white !important;
        border-radius: 4pt !important;
        overflow: hidden !important;
        box-shadow: 0 1pt 4pt rgba(0,0,0,0.1) !important;
    }
    
    table th {
        background: #1e40af !important;
        color: white !important;
        font-weight: bold !important;
        padding: 6pt 4pt !important;
        border: none !important;
        text-align: center !important;
        font-size: 9pt !important;
        text-transform: uppercase !important;
        letter-spacing: 0.3pt !important;
    }
    
    table td {
        padding: 4pt 6pt !important;
        border: 1px solid #e2e8f0 !important;
        vertical-align: middle !important;
        font-size: 8pt !important;
        line-height: 1.3 !important;
        background: white !important;
    }
    
    table tr {
        break-inside: avoid !important;
        page-break-inside: avoid !important;
    }
    
    table tr:nth-child(even) td {
        background: #f8fafc !important;
    }
    
    table tr:hover td {
        background: #e2e8f0 !important;
    }
    
    /* Colunas específicas da tabela */
    table th:nth-child(1), table td:nth-child(1) { width: 8% !important; text-align: center !important; font-weight: bold !important; }
    table th:nth-child(2), table td:nth-child(2) { width: 45% !important; text-align: left !important; }
    table th:nth-child(3), table td:nth-child(3) { width: 10% !important; text-align: center !important; font-weight: bold !important; }
    table th:nth-child(4), table td:nth-child(4) { width: 18% !important; text-align: right !important; font-weight: bold !important; color: #059669 !important; }
    table th:nth-child(5), table td:nth-child(5) { width: 19% !important; text-align: right !important; font-weight: bold !important; color: #1e40af !important; }
    
    /* ========================================
       TOTAL DO INVESTIMENTO (FINAL DA PRIMEIRA PÁGINA)
    ======================================== */
    .total-section-first-page-bottom {
        page-break-inside: avoid !important;
        margin: 10pt 0 15pt 0 !important;
        border: 2px solid #1e40af !important;
        border-radius: 6pt !important;
        padding: 10pt !important;
        background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%) !important;
        box-shadow: 0 2pt 6pt rgba(30, 64, 175, 0.1) !important;
    }
    
    .total-section-first-page-bottom .total-investimento h3 {
        color: #1e40af !important;
        font-size: 10pt !important;
        font-weight: bold !important;
        margin: 0 0 4pt 0 !important;
        text-align: center !important;
        letter-spacing: 0.5pt !important;
        text-transform: uppercase !important;
    }
    
    .total-section-first-page-bottom .total-investimento div {
        color: #1e40af !important;
        font-size: 16pt !important;
        font-weight: bold !important;
        text-align: center !important;
        margin: 0 !important;
    }

    /* ========================================
       TOTAL DO INVESTIMENTO (PRIMEIRA PÁGINA) - REMOVIDO
    ======================================== */
    .total-section-first-page {
        display: none !important; /* Oculta a seção antiga */
    }

    /* ========================================
       TOTAL DO INVESTIMENTO (COMPACTO) - REMOVIDO
    ======================================== */
    .total-section {
        display: none !important; /* Oculta a seção duplicada */
    }
    
    /* ========================================
       ESPECIFICAÇÕES, CONDIÇÕES E OBSERVAÇÕES (PRIMEIRA PÁGINA)
    ======================================== */
    .specs-section-first-page, .terms-section-first-page, .observations-section-first-page {
        page-break-inside: avoid !important;
        margin-bottom: 12pt !important;
    }
    
    .specs-section-first-page h3, .terms-section-first-page h3, .observations-section-first-page h3 {
        color: #1e40af !important;
        font-size: 11pt !important;
        font-weight: bold !important;
        margin: 0 0 6pt 0 !important;
        border-bottom: 2px solid #3b82f6 !important;
        padding-bottom: 3pt !important;
    }
    
    .specs-section-first-page .bg-gray-50, .observations-section-first-page .bg-yellow-50 {
        background: #f8fafc !important;
        border: 1px solid #e2e8f0 !important;
        border-radius: 4pt !important;
        padding: 8pt !important;
    }
    
    .specs-section-first-page ul, .observations-section-first-page ul {
        margin: 0 0 6pt 14pt !important;
        padding: 0 !important;
    }
    
    .specs-section-first-page li, .observations-section-first-page li, .terms-section-first-page p {
        margin-bottom: 3pt !important;
        font-size: 9pt !important;
        line-height: 1.3 !important;
    }
    
    .terms-section-first-page .text-sm {
        font-size: 9pt !important;
        line-height: 1.3 !important;
    }

    /* ========================================
       ESPECIFICAÇÕES E TERMOS (COMPACTOS) - OCULTAS
    ======================================== */
    .specs-section, .terms-section, .observations-section {
        display: none !important; /* Oculta as seções duplicadas */
    }
    
    /* ========================================
       RODAPÉ (PÁGINA FINAL)
    ======================================== */
    .proposal-footer {
        border-top: 2px solid #1e40af !important;
        padding-top: 8pt !important;
        margin-top: 15pt !important;
        text-align: center !important;
        font-size: 9pt !important;
        color: #6b7280 !important;
        page-break-inside: avoid !important;
        page-break-after: avoid !important;
    }
    
    .proposal-footer p {
        margin-bottom: 6pt !important;
        line-height: 1.4 !important;
    }
    
    .proposal-footer div {
        font-size: 7pt !important;
        color: #9ca3af !important;
        font-style: italic !important;
    }
    
    /* ========================================
       CONTROLE DE QUEBRAS DE PÁGINA OTIMIZADO
    ======================================== */
    .page-break {
        page-break-before: always !important;
    }
    
    /* Layout do projeto sempre na segunda página */
    .project-visual {
        page-break-before: always !important;
        page-break-after: auto !important;
    }
    
    /* Evita quebras indesejadas na tabela de orçamento */
    .budget-section {
        page-break-before: auto !important;
        page-break-after: auto !important;
    }
    
    /* Força quebra antes das especificações se necessário */
    .floors-section {
        page-break-before: auto !important;
        page-break-after: auto !important;
    }
    
    /* Controle de órfãos e viúvas */
    p, li, td, th {
        orphans: 2 !important;
        widows: 2 !important;
    }
}

/* ========================================
   ESTILOS NORMAIS (TELA)
======================================== */

/* Slider customizado */
.slider::-webkit-slider-thumb {
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #4F46E5;
    cursor: pointer;
    border: 2px solid #ffffff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.slider::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #4F46E5;
    cursor: pointer;
    border: 2px solid #ffffff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

/* Animações de botões */
.tool-btn {
    transition: all 0.2s ease;
}

.tool-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

/* Container de canvas responsivo */
.canvas-container {
    position: relative;
    max-width: 100%;
    overflow: hidden;
}

/* Estilo para elementos selecionados */
.selected {
    outline: 3px solid #4F46E5;
    outline-offset: 2px;
}

/* ========================================
   ESTILOS NORMAIS (TELA)
======================================== */

/* Slider customizado */
.slider::-webkit-slider-thumb {
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #4F46E5;
    cursor: pointer;
    border: 2px solid #ffffff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.slider::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #4F46E5;
    cursor: pointer;
    border: 2px solid #ffffff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

/* Animações de botões */
.tool-btn {
    transition: all 0.2s ease;
}

.tool-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

/* Container de canvas responsivo */
.canvas-container {
    position: relative;
    max-width: 100%;
    overflow: hidden;
}

/* Estilo para elementos selecionados */
.selected {
    outline: 3px solid #4F46E5;
    outline-offset: 2px;
}